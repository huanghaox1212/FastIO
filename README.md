# FastIO
## 简介
用fread和fwrite优化了putchar和getchar函数，平均每次读写1000000字节。  
使用常规方式实现了整数、长整数、浮点数、C风格字符串和C++标准库中的string类型等的读写以及eof的判断（这在读写不定量数据时是必须的，例如while(io>>x)）。  
所有数据以及方法包装在一个struct内，加入了常数优化。

## 使用说明
这一部分非常重要，之前有人因为错误使用而导致代码崩溃。  
如果您已经阅读了代码（在.cpp文件里），那么请看下面的部分：

原理：每次批量读入1000001字节，存到输入项里，读完了继续尝试读入，存到输入项里。每次批量输出1000001字节，最后用go函数把输出项里剩下的也输出了。如果觉得空间会超限（大约2KB的读写数组，超限的可能还是很小的），请自行调整批量读写的数据大小。

使用说明：

1.本模板的文件流没有兼容用其他的任何输入/输出，包括getchar、putchar、cin、scanf之类。一般情况下该模板足以实现常用的读写功能，如果仍然有特殊需求，请自行添加功能。

2.本模板使用批量输入/输出，输出项中可能留有剩余的不足1000000字节的内容，想要输出这些内容，应调用go函数（无参数）。  
**为了正确且高效率地输出，调用go函数的语句必须加在最后一次输出之后（一般在main函数return 0前一行）。没有go函数的调用，FastIO可能无法输出。**

3.具体用法如下：

**·** 预处理

**注：FastIO io;这句定义必须设置为全局定义！**
```cpp
#include <bits/stdc++.h>//头文件不要乱改，否则会不支持某些函数。
using namespace std;
FastIO io;//这一句定义必须为全局定义。
int main(){
    freopen(输入文件名，"r",stdin),freopen(输出文件名，"w",stdout);
    //注意在标准输入输出评测时去掉freopen语句
    //调试时一定要用文件读写，否则输入会卡死（评测机上不会）。
    //由于所有评测机本质上皆使用文件式评测，无需担心会在评测机上出错（亲测通过Luogu和OJ评测）。
    return 0;
}
```
**·** 输入输出
```cpp
char ch;int a;long long d;string s1,s2;double aa,bb;
io>>ch>>a>>d>>s1>>aa>>bb,io<<ch<<a<<d<<s1<<aa<<bb;
io.getline(s2),io<<s2,io.puts("123"),io<<"456";
//<<输出操作不能与>>输入操作连在一起！
io.go();//这一句千万别忘了加上！
```
**·** 判断EOF（使用重载类型转换运算符实现）

这是本模板的优点，网上的代码均无法**正确**判断EOF.
```cpp
while(io>>ch)io<<ch;//判断方法与cin类似。
if(io)...
```
**·** 其他
```cpp
//FastIO的struct加在main前面，可以把不要的重载运算符删掉，比如只需要输入输出整数，就把输入输出字符串之类的删掉。
//如果需要别的实现，请以getch和putch代替getchar和putchar，然后自行实现。
//以下几个函数/变量千万不能删掉：
//FastIO,go,getch,putch,rbuf,wbuf,p1,p2,rfile,wfile,rs,ws
//有时编译时可能会有警告，不用担心，可放心使用。
//警告原因：
//1.输出C风格字符串的函数参数不是const类型，输出字符串常量时会警告。
//2.为了常数优化，部分int换成了char，某些编译器会进行警告。
```
如果您的代码崩溃了，请检查是否为如下原因：
- 在某一个输出后没有调用go函数，如果缺少可能无法输出。
- 重复定义FastIO的对象，这会导致玄学错误。
- 修改了FastIO内的一些参数而没有对相关内容进行调整。
如果仍然会崩溃，请联系本文作者，说明bug的内容以及出现bug的源代码。

作者是个蒟蒻，暂时就写到这里，希望该模板对您有所帮助。
